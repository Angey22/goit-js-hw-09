{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAUC,SAASC,cAAc,SAEjCC,EAAqB,eAE3B,IAAIC,EAAW,CAAC,EAuDhB,SAASC,EAAcC,EAAUC,GAC/B,OAAO,IAAIC,SAAQ,CAACC,EAASC,KAC3BC,YAAW,KACaC,KAAKC,SAAW,GAEpCJ,EAAQ,C,SAAEH,E,MAAUC,IAEpBG,EAAO,C,SAAEJ,E,MAAUC,GAAM,GAE1BA,EAAA,GAEP,CAhEAP,EAAQc,iBAAiB,UAKzB,SAA0BC,GACxBA,EAAEC,iBAiCJ,UAA6BT,MAAEA,EAAKU,KAAEA,EAAIC,OAAEA,GAAW,CAAC,GACtD,IAAIC,EAAWC,OAAOb,GACtB,IAAK,IAAIc,EAAI,EAAGA,GAAKH,EAAQG,GAAK,EAChChB,EAAcgB,EAAGF,GACdG,MAAK,EAAChB,SAAEA,EAAQC,MAAEA,KACjBT,EAAAyB,OAAOC,QAAQ,uBAAuBlB,QAAeC,SAEtDkB,OAAM,EAACnB,SAAEA,EAAQC,MAAEA,KAClBT,EAAAyB,OAAOG,QAAQ,sBAAsBpB,QAAeC,SAExDY,GAAYC,OAAOH,EAEvB,CA3CEU,CAAoBvB,GAEpBwB,aAAaC,WAAW1B,GACxBY,EAAEe,OAAOC,QAET3B,EAAW,CAAC,CACd,IAbAJ,EAAQc,iBAAiB,UAezB,SAA0BC,GACxBX,EAASW,EAAEe,OAAOE,MAAQjB,EAAEe,OAAOG,MAAMC,OAEzC,MAAMC,EAAoBC,KAAKC,UAAUjC,GACzCwB,aAAaU,QAAQnC,EAAoBgC,EAC3C,IAEA,WACE,MAAMI,EAAeX,aAAaY,QAAQrC,GAE1C,GAAIoC,EACF,IACEnC,EAAWgC,KAAKK,MAAMF,GAEtBG,OAAOC,QAAQvC,GAAUwC,SACvB,EAAEZ,EAAMC,KAAYjC,EAAQ6C,SAASb,GAAMC,MAAQA,GAEvD,CAAE,MAAOa,GACPC,QAAQC,IAAIF,EAAMG,QACpB,CAEJ,CAlCAC","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst formRef = document.querySelector('.form');\n\nconst FORM_CURRENT_VALUE = 'form-storage';\n\nlet formData = {};\n\nformRef.addEventListener('submit', handleSubmitForm);\nformRef.addEventListener('change', handleInputValue);\n\ngetFormDataFromStorage();\n\nfunction handleSubmitForm(e) {\n  e.preventDefault();\n\n  startCreatePromises(formData);\n\n  localStorage.removeItem(FORM_CURRENT_VALUE);\n  e.target.reset();\n\n  formData = {};\n}\n\nfunction handleInputValue(e) {\n  formData[e.target.name] = e.target.value.trim();\n\n  const stringifyFormData = JSON.stringify(formData);\n  localStorage.setItem(FORM_CURRENT_VALUE, stringifyFormData);\n}\n\nfunction getFormDataFromStorage() {\n  const savedMessage = localStorage.getItem(FORM_CURRENT_VALUE);\n\n  if (savedMessage) {\n    try {\n      formData = JSON.parse(savedMessage);\n\n      Object.entries(formData).forEach(\n        ([name, value]) => (formRef.elements[name].value = value)\n      );\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n}\n\nfunction startCreatePromises({ delay, step, amount } = {}) {\n  let stepTime = Number(delay);\n  for (let i = 1; i <= amount; i += 1) {\n    createPromise(i, stepTime)\n      .then(({ position, delay }) =>\n        Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`)\n      )\n      .catch(({ position, delay }) =>\n        Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`)\n      );\n    stepTime += Number(step);\n  }\n}\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const shouldResolve = Math.random() > 0.3;\n      if (shouldResolve) {\n        resolve({ position, delay });\n      } else {\n        reject({ position, delay });\n      }\n    }, delay);\n  });\n}\n"],"names":["$9EgcF","parcelRequire","$75aa520dfb7f3d3e$var$formRef","document","querySelector","$75aa520dfb7f3d3e$var$FORM_CURRENT_VALUE","$75aa520dfb7f3d3e$var$formData","$75aa520dfb7f3d3e$var$createPromise","position","delay","Promise","resolve","reject","setTimeout","Math","random","addEventListener","e","preventDefault","step","amount","stepTime","Number","i","then","Notify","success","catch","failure","$75aa520dfb7f3d3e$var$startCreatePromises","localStorage","removeItem","target","reset","name","value","trim","stringifyFormData","JSON","stringify","setItem","savedMessage","getItem","parse","Object","entries","forEach","elements","error","console","log","message","$75aa520dfb7f3d3e$var$getFormDataFromStorage"],"version":3,"file":"03-promises.7dd9fb76.js.map"}